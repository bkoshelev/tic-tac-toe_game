on: push
name: deploy admin
jobs:
  install:
    name: Install
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - name: Install
      uses: actions/npm@59b64a598378f31e49cb76f27d6f3312b582f680
      env:
        NODE_ENV: production
      with:
        args: install
    - name: Build
      uses: actions/npm@59b64a598378f31e49cb76f27d6f3312b582f680
      env:
        NODE_ENV: production
      with:
        args: run build
    - name: Deploy
      uses: appleboy/scp-action@v0.0.1
      env:
        HOST: ${{ secrets.HOST }}
        PASSWORD: ${{ secrets.PASSWORD }}
        SOURCE: dist
        TARGET: /home/bkoshelev/tic-tac-toe_game/game
        USERNAME: ${{ secrets.USERNAME }}
      with:
        args: --debug --rm
